(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();const w={appNames:[],customJsonPrefixes:["archmage_"],hiveEngineSymbols:["ARCHMAGE","ARCHMAGEA","ARCHMAGEB","ARCHMAGEM"],color:"blue",label:"Archmage"},_={appNames:["actifit"],color:"red",customJsonPrefixes:["actifit"],hiveEngineSymbols:["AFIT","AFITX"],label:"Actifit"},E={color:"blue",customJsonPrefixes:["ac-"],label:"AC"},C={appNames:["beem","beempy"],color:"gray",label:"beem"},q={appNames:["beerlover"],color:"orange",hiveEngineSymbols:["BEER"],label:"Beer"},A={appNames:[],customJsonPrefixes:["cbm_"],hiveEngineSymbols:[""],color:"lightgreen"},I={appNames:[],color:"gray",customJsonPrefixes:[],hiveEngineSymbols:[""]},j={appNames:["CS"],color:"blue",label:"CS"},T={appNames:[],customJsonPrefixes:["dcrops"],hiveEngineSymbols:[""],color:"lightgreen",label:"dCrops"},z={appNames:["dbuzz"],color:"red",label:"dBuzz"},L={customJsonPrefixes:["dlux_"],label:"DLUX",color:"lightgreen"},M={appNames:[],color:"gray",customJsonPrefixes:[],hiveEngineSymbols:[""],label:"Downvote"},W={appNames:["ecency"],color:"blue",label:"Ecency",customJsonPrefixes:["ecency_","esteem_"],hiveEngineSymbols:[""]},$={appNames:["engage"],color:"blue",label:"Engage"},D={appNames:["engrave"],color:"blue",label:"Engrave"},H={color:"blue",customJsonPrefixes:["exode"],label:"Exode"},R={appNames:["exxp"],color:"blue",label:"Exxp"},U={appNames:[],color:"blue",customJsonPrefixes:["go_"],label:"GolemO"},B={appNames:[],color:"blue",customJsonPrefixes:["gls-"],hiveEngineSymbols:[""],label:"GLS"},F={appNames:[],color:"red",customJsonPrefixes:["ssc-mainnet","scot_"],hiveEngineSymbols:[""],label:"H-E"},G={"app-names":[],color:"lightgreen",customJsonPrefixes:["qwoyn_"],hiveEngineSymbols:["BUDS","BUDSX","EXP"],label:"HashKings"},Z={color:"hotpink",customJsonPrefixes:["pp_video"],label:"HiveTube"},X={"app-names":[],color:"purple","custom-json-ids":[],hiveEngineSymbols:["ZING"],label:"Holo"},K={color:"yellow"},V={color:"navyblue",customJsonPrefixes:["ic_"],label:"IC"},Q={appNames:["leothreads","leofinance"],color:"yellow",customJsonPrefixes:["leo_","inleo_"],label:"INLEO",url:"https://inleo.io"},Y={appNames:"la-colmena"},ee={customJsonPrefixes:["lensy_"],label:"Lensy"},oe={appNames:["liketu"],color:"bluegreen",customJsonPrefixes:["react"],label:"liketu",url:"https://www.liketu.com/"},te={color:"blue",customJsonPrefixes:["mole-miner-"],label:"MuTerra"},re={color:"orange",customJsonPrefixes:["nftmart"],label:"NFTMart",url:"https://nftm.art"},ne={customJsonPrefixes:["nftsr_"],label:"NTFSR"},se={customJsonPrefixes:["op_"],label:"OP"},le={color:"gray"},ce={customJsonPrefixes:["pm_"],label:"PKM",color:"orange"},ae={appNames:["peakd"],color:"lightgreen",customJsonPrefixes:["peakd_","beacon_custom_json"],label:"PeakD"},ie={color:"bluegreen",customJsonPrefixes:["pigs_expired/1","reject_order/1","game_request/1","pack_purchase/1","confirm_order/1","fulfill_pigs/1","end_game/1","gmreq_","start_game/1","game_rewards/1","pig_upgrade/1","fulfill_points/1"],label:"Piggies"},ue={appNames:["pizzabot"],color:"yellow",hiveEngineSymbols:["PIZZA"],label:"PIZZA",url:"https://hive.pizza"},me={color:"lightgreen",customJsonPrefixes:["polls"],label:"polls"},fe={appNames:["Poshtoken 0.0.1","Poshtoken 0.0.2"],color:"yellow"},pe={color:"lightgreen"},de={color:"yellow",customJsonPrefixes:["pp_"],label:"podping"},be={label:"PoB",customJsonPrefixes:["proofofbrain"],color:"gray"},ge={color:"bluegreen",customJsonPrefixes:["duat_"],label:"Ragnarok"},ye={appNames:["somee"],color:"red",label:"Somee"},ve={appNames:["3speak","3SpeakComment"],color:"bluegreen",customJsonPrefixes:["spkcc_","3speak-"],hiveEngineSymbols:[""],label:"Spk"},he={appNames:["splinterboost"],color:"green",label:"Splinterboost"},Se={appNames:["steemmonsters","splinterlands"],color:"green",customJsonPrefixes:["sm_","sl-","dev-sm_"],label:"SL"},ke={appNames:["splintertalk"],color:"green",label:"Splintertalk"},xe={color:"blue"},Ne={color:"orange",customJsonPrefixes:["terracore_","tm_"],label:"Terracore"},Pe={color:"gray"},Oe={appNames:["travelfeed"],color:"orange",label:"Travelfeed"},Je={appNames:["Discord"],color:"blue",label:"Qurator"},we={appNames:["sportstalksocial"],hiveEngineSymbols:["SPORTS"],color:"blue",label:"Sportstalk"},_e={color:"gray"},Ee={color:"blue",customJsonPrefixes:"vsc.",label:"VSC"},Ce={color:"orange",label:"VIMM"},qe={appNames:["waivio"],color:"gray",customJsonPrefixes:["wobj_","waivio_"],label:"Waivio"},Ae={color:"yellow",customJsonPrefixes:["woo_"],hiveEngineSymbols:["WOO","WOOALPHA","WOOSATURN","WOORAVEN"],label:"WOO"},c={archmage:w,actifit:_,arcadecolony:E,beem:C,beerlover:q,CBM:A,Comment:I,cryptoshots:j,dcrops:T,dbuzz:z,dlux:L,downvote:M,ecency:W,engage:$,enrave:D,exode:H,exxp:R,golemoverlord:U,gls:B,hiveengine:F,hashkings:G,"Hive.blog":{appNames:["hiveblog"],color:"yellow-orange",label:"hive.blog"},hivetube:Z,holozing:X,Holybread:K,immortalcreed:V,inleo:Q,lacolmena:Y,lensy:ee,liketu:oe,muterra:te,nftmart:re,nftshowroom:ne,oceanplanet:se,Other:le,peakmonsters:ce,peakd:ae,piggericks:ie,PIZZA:ue,polls:me,Posh:fe,Post:pe,podping:de,proofofbrain:be,ragnarok:ge,somee:ye,spk:ve,splinterboost:he,splinterlands:Se,splintertalk:ke,STEMSocial:xe,terracore:Ne,Xfer:Pe,travelfeed:Oe,qurator:Je,sportstalksocial:we,Up:_e,vsc:Ee,vimm:Ce,waivio:qe,WOO:Ae},f=800,p=600;function k(e,t,r){return e<=t?t:e>=r?r:e}const Ie=()=>Math.random()<.5?-1:1,i=e=>e*Ie()*Math.random();function je(e){var t=d3.select("svg#viz").selectAll("g").data(e);t.enter().append("g").attr("pointer-events","all").attr("class","node").each(function(r){d3.select(this).append("circle").attr("class",function(o){return`${o.color} stroke`}).attr("r",function(o){return k(o.label.length*6.25,20,40)}).attr("pointer-events","all").on("mouseover",o=>console.warn(o)),d3.select(this).append("text").attr("dominant-baseline","central").attr("text-anchor","middle").text(function(o){return o.label}).style("font-size","17px").attr("pointer-events","all").on("mouseover",o=>console.warn(o))}).attr("pointer-events","all").on("mouseover",r=>console.warn(r)),t.exit().remove()}function Te(){var e=d3.select("svg#viz").selectAll("g");e.attr("transform",function(t){return"translate("+t.x+","+t.y+")"})}function ze(e){const t=b(e);var r=g(e),o;return t?o=u(t):o=u(r),[{label:r,color:o,x:f/2+i(100),y:p/2+i(100)}]}function Le(e){var t=[],r=e[1].json;try{r=JSON.parse(r)}catch(o){return console.warn("Invalid JSON:",o),[]}if(!r)return t;if(Array.isArray(r))for(const o of r){const s=N(o.contractPayload.symbol);if(!s)continue;const n=P(s),l=u(s);t.push({label:n,color:l,x:f/2+i(100),y:p/2+i(100)})}else if(r.contractPayload){const o=r.contractPayload.symbol,s=N(o);if(!s)return t;const n=P(s),l=u(s);console.debug(s,n,l),t.push({label:n,color:l,x:f/2+i(100),y:p/2+i(100)})}return t}function Me(e){if(document.querySelector("#flexCheckCustomJSONs").value)return[];var t=[],r=e[1].id;r.startsWith("ssc-mainnet")&&(t=t.concat(Le(e)));const o=b(e);var s=g(e);s||console.error("missing label for:",o);var n;return o?n=u(o):n=u(s),t.push({label:s,color:n,x:f/2+i(100),y:p/2+i(100)}),t}function We(e){const t=b(e);var r=g(e),o;return t?o=u(t):o=u(r),[{label:r,color:o,x:f/2+i(100),y:p/2+i(100)}]}function $e(e){var t=[];return e.forEach(r=>{r.operations.forEach(o=>{const s=o[0];var n=[];s==="comment"?n=ze(o):s==="custom_json"?n=Me(o):n=We(o),t=t.concat(n)})}),t}function N(e){for(const[t,r]of Object.entries(c))if(r.hiveEngineSymbols&&r.hiveEngineSymbols.includes(e))return console.debug("from HE symbol appId",t),t}function b(e){const t=e[0];var r=e[1].json_metadata;if(r)var r=JSON.parse(r);if(r&&r.app){var o=r.app;typeof o=="string"?(o=o.split("/")[0],o=o.split("-mobile-")[0]):o.name&&(o=o.name)}if(o&&console.debug("JSON app name",o),o){for(const[n,l]of Object.entries(c))if(l.appNames){for(const a of l.appNames)if(a.startsWith(o.toLowerCase()))return console.debug("appId",n),n}console.warn("Did not find app in registry: ",o)}if(t=="custom_json"){var s=e[1].id;for(const[n,l]of Object.entries(c))if(l.customJsonPrefixes){for(const a of l.customJsonPrefixes)if(s.startsWith(a))return console.debug("appId",n),n}}return null}function g(e){var t=e[0];if(t=="comment"){const l=b(e);return l&&!Object.keys(c[l]).includes("label")&&console.log(l,"missing label"),l&&c[l].label?c[l].label:t.charAt(0).toUpperCase()+t.slice(1)}else if(t=="custom_json"){var r=e[1].id,o=e[1].json,s=o.app;if(typeof s=="object"&&Object.keys(s).includes("name")&&(s=s.name),s){for(const l of Object.values(c))if(l.appNames){for(const a of l.appNames)if(a.startsWith(s))return console.debug("Labeled by app name:",l.label),l.label}}for(const l of Object.values(c))if(l.customJsonPrefixes){for(const a of l.customJsonPrefixes)if(r.startsWith(a))return l.label}return r=="notify"?"Notify":r=="follow"?"Follow":r=="reblog"?"Reblog":r=="community"?"Community":r==="rc"?"RC":(console.warn("Unrecognized CustomJSON id:",r),"Other")}else{if(t=="vote")return e[1].weight>0?"Up":"Down";if(t=="transfer")return"Xfer";if(t.startsWith("limit"))return"Market";var n=e[0].split("_")[0];return n=n.charAt(0).toUpperCase()+n.slice(1),n=n.substring(0,9),n}}function P(e){return Object.keys(c).includes(e)&&c[e].label?c[e].label:(console.warn("Label not found for: ",e),"Other")}function u(e){return Object.keys(c).includes(e)&&c[e].color?c[e].color:"gray"}function J(){var e=prompt("Enter block number:",document.querySelector("#blockNum").innerText);e=parseInt(e)-1,!e||e<0?h():(document.querySelector("#blockNum").data=`${e+1}`,document.querySelector("#blockNum").innerText=`${e}`),y()}document.querySelector("button#gotoblock").onclick=e=>{J()};function x(e){document.querySelector("button#play").hidden?(document.querySelector("button#pause").hidden=!0,document.querySelector("button#play").hidden=!1):(document.querySelector("button#play").hidden=!0,document.querySelector("button#pause").hidden=!1)}document.querySelector("button#pause").onclick=e=>{x()};document.querySelector("button#play").onclick=e=>{x()};function De(){document.querySelector("#flexCheckCustomJSONs").value?document.querySelector("#flexCheckCustomJSONs").value=!1:document.querySelector("#flexCheckCustomJSONs").value=!0}document.querySelector("#flexCheckCustomJSONs").onclick=e=>{De()};function d(e){const s=v();if(e)var n=s+1;else var n=s-1;n=k(n,1,10),document.querySelector("#speedgauge").data=`${n}`,document.querySelector("#speedgauge").innerText=`${n}x`}document.querySelector("button#fastforward").onclick=e=>{d(!0)};document.querySelector("button#backward").onclick=e=>{d(!1)};function v(){document.querySelector("#speedgauge").data||(document.querySelector("#speedgauge").data="1.0");var e=parseFloat(document.querySelector("#speedgauge").data);return e}hive.api.setOptions({url:"https://api.deathwing.me/"});function h(){hive.api.getDynamicGlobalProperties(function(e,t){if(e){console.error(e);return}var r=t.current_witness;document.querySelector("#currentWitness").innerText=`${r}`;var o=t.head_block_number;document.querySelector("#blockNum").innerText=`${o}`,document.querySelector("#blockNum").data=`${o}`,y()})}function y(){var e=document.querySelector("#blockNum").data;if(!e){console.debug("Failed to find block");return}hive.api.getBlock(e,function(t,r){if(t){console.error(t);return}var o=r;if(!o||!o.transactions)return;const s=o.transactions.length;document.querySelector("#blockSize").innerText=`${s.toLocaleString()} transactions`,d3.select("svg#viz").selectAll("g").remove(),d3.select("svg#viz").attr("pointer-events","all"),d3.select("svg#viz").on("click",l=>console.error(l));var n=$e(o.transactions);je(n),d3.selectAll("g").on("click",l=>console.error(l)),d3.selectAll("g").select("text").on("click",l=>console.error(l)),d3.selectAll("circle").attr("pointer-events","all"),d3.selectAll("g").select("circle").on("click",l=>console.error(l)),d3.forceSimulation(n).force("center",d3.forceCenter(f/2,p/2)).force("collision",d3.forceCollide().radius(function(l){return k(l.label.length*6.25,20,40)})).on("tick",Te).alpha(10),o.transactions.forEach(l=>{l.operations.forEach(a=>{a[0]==="custom_json"&&g(a)=="Other"&&console.warn("Unknown app",JSON.stringify(a))})}),document.querySelector("#blockNum").data==`${parseInt(e)}`&&(document.querySelector("#blockNum").data=`${parseInt(e)+1}`,document.querySelector("#blockNum").innerText=`${e}`,document.querySelector("#currentWitness").innerText=`${o.witness}`,document.querySelector("#timestamp").innerText=`${o.timestamp}`)}),console.info("Parsed block number:",e)}var O=new URLSearchParams(window.location.search);if(O.has("block")){var m=O.get("block"),m=parseInt(m);isNaN(m)||m<0?h():(document.querySelector("#blockNum").innerText=`${m}`,document.querySelector("#blockNum").data=`${m}`,y())}else h();function S(){document.querySelector("button#pause").hidden!=!0&&v()!=0&&y();var e=Math.abs(3e3/v());e!=1/0?setTimeout(()=>{S()},e):setTimeout(()=>{S()},1e3)}S();document.onkeydown=He;function He(e){e=e||window.event,e.keyCode=="38"||e.keyCode=="40"||(e.keyCode=="37"?d(!1):e.keyCode=="39"?d(!0):e.keyCode=="32"?x():e.keyCode=="83"&&J())}window.addEventListener("keydown",function(e){e.keyCode==32&&e.target==document.body&&e.preventDefault()});
